#
# BASH
# .little function tools for my bash
# 
# file: ~/.bashrc
# v1.0 / 2015.04.15
#
# (c) 2015 Bernd Busse
#

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# Simple Stopwatch
function stopwatch() {
    date1=$(date +%s); 
    while true; do 
        echo -ne "$(date -u --date @$(($(date +%s) - ${date1})) +%H:%M:%S)\r"; sleep 0.1
    done
}

# Simple countdown timer
function countdown() {
    seconds=${1};
    if [ -z ${seconds} ]; then
        return
    fi
    date1=$(($(date +%s) + ${seconds})); 
    while [ "${date1}" -ne $(date +%s) ]; do 
        echo -ne "$(date -u --date @$((${date1} - $(date +%s) )) +%H:%M:%S)\r"; 
    done
    echo -e "BOOOOOOOMMMM!!!!!!"
}

# Show Batter percentage
function battery() {
    for bat in $(upower -e | grep 'battery'); do
        output="$(upower -i $bat)"
        _name="$(echo "$output" | grep 'native-path' | sed -re 's/^\s*native-path:\s*(.*)$/\1/g')"
        _percentage="$(echo "$output" | grep 'percentage' | sed -re 's/^\s*percentage:\s*([0-9][0-9]%)$/\1/g')"
        _state="$(echo "$output" | grep 'state' | sed -re 's/^\s*state:\s*(.*)$/\1/g')"
        echo "${_name}: ${_percentage} (${_state})"
    done
}

