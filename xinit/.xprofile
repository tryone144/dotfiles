#!/bin/sh
#
# XINIT
# set relevant settings for specific wms including autostart
# (sourced by lightdm and .xinitrc)
#   needs: [dex]
#          [powerline-fonts]
#          [argyllcms]
#
# file: ~/.xprofile
# v1.3 / 2015.05.12
#
# (c) 2015 Bernd Busse
#

# set config dir and run autostart files with dapper
if [[ "${DESKTOP_SESSION}" == *herbstluftwm ]]; then
    export HLWM_CONFIG="$HOME/.config/herbstluftwm/"
    dex -ae MATE
    #gnome-keyring-daemon -r -d
    export $(gnome-keyring-daemon -s)
elif [[ "${DESKTOP_SESSION}" == *i3 ]]; then
    export I3_CONFIG="$HOME/.config/i3/"
    dex -ae MATE
    #gnome-keyring-daemon -r -d
    export $(gnome-keyring-daemon -s)
fi

# set primary display, if not allready set
xrandr -d ${DISPLAY} --query | grep -e 'primary' &> /dev/null
if [[ ${?} == 1 ]]; then
    monitor="$(xrandr -d ${DISPLAY} --query | grep -e ' connected '| cut -d' ' -f1)"
    xrandr --output ${monitor} --primary
fi

# set display calibration profiles
if [[ ${HOSTNAME} == "sachnix" ]]; then
    dispwin -d 1 -I ~/.local/share/colord/DELL\ U2410\ -\ 20150506.icc
    dispwin -d 2 -I ~/.local/share/colord/SAMSUNG\ SyncMaster245B\ -\ 20150506.icc
fi

